datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id          String   @id @default(uuid()) @db.VarChar(36)
  email       String   @unique
  password    String
  name        String
  role        String   @default("Creator")
  creationDate DateTime @default(now()) @map("created_at")
  lastLogin   DateTime?
  subscriptionStatus String @default("Free")
  subscriptionEndDate DateTime?
  profilePictureUrl  String?
  niche             String?
  companyName       String?
  refreshTokens  RefreshToken[] 
  @@map("users") 
}
model RefreshToken {
  id             String   @id @default(uuid()) @db.VarChar(36)
  token          String   @unique
  userId         String   @db.VarChar(36)
  expiresAt      DateTime
  isRevoked      Boolean  @default(false)
  createdAt      DateTime @default(now()) @map("created_at")
  
  // Relation avec User
  user           User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  
  @@map("refresh_tokens")
  @@index([userId])
}
